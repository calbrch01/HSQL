# HSQLC

The obvious transpiler.
`hsqlc` is a node program which can be run standalone, or imported to be executed.

For an deeper look at the technical details, refer to the [dev pages](dev/README.md).

*dependencies*: `antlr4`,`yargs`,`string-template`,`yargs`

*devDependencies*: `chai`,`mocha`,`jsdoc`,`xml2js`,`eslint`,`typescript`

## Table of Contents

- [HSQLC](#hsqlc)
  - [Table of Contents](#table-of-contents)
  - [Program](#program)
  - [Package](#package)
  - [Arguments](#arguments)
    - [Examples](#examples)
  - [Module](#module)
    - [toECL](#toecl)
    - [stringToECL](#stringtoecl)
    - [fileToECL](#filetoecl)
  - [Typescript](#typescript)
    - [index.d.ts](#indexdts)


## Program

```sh
hsqlc --help
```

`hsqlc` uses `yargs` to do opstring parsing, where various flags will affect its runtime. The easiest way to compile any program:

```sh
hsqlc -i foo.hsqlc -o -d
```

This should be sufficient for most usecases. This is considering a input file `foo.hsql` and writing the output of the translation to `foo.ecl` (as directed by the `o` flag). Any `.hsql` based dependencies, are

## Package

This utility can also be packaged into an executable by using `pkg`.
The assets have been preconfigured, and executables may be easily generated by using

```sh
npm run build
```

This will yield three executables (as of now), and can be used the same as before

## Arguments

|Argument    |Alias(es)     |Description         |
|------------|:------------:|:------------------:|
|--help      | N/A          |Show help           |
|--version   | N/A          |Show version number |
|-i          | --input, -f  |Input file path     |
|-o          | --output     |Output file path    |
|-d          | --writedeps  |Write dependencies  |
|-w          | --no-warnings|Suppress warnings   |
|-n          | --no-parse   |Do not parse        |


### Examples

#### Standard output

```sh
hsqlc -i foo.hsql
```

#### Write to file

```sh
hsqlc -i ./bar/foo.hsql -o
```

Output Location: `./bar/foo.ecl`

Any other dependencies: *Will not be compiled into files*

```sh
hsqlc -i ./bar/foo.hsql -o baz.ecl
```

Output Location: `./baz.ecl`

Any other dependencies: *Will not be compiled into files*

#### Dependencies

```sh
hsqlc -i ./bar/foo.hsqlc -o -d
```
Output Location: `./bar/foo.ecl`

Any other .hsql file that was imported: `./bar/*.ecl`

```sh
hsqlc -i ./bar/foo.hsqlc -d
```

Output Location: **N/A**

Any other .hsql file that was imported: `./bar/*.ecl`

#### Testing waters

```sh
hsqlc -i ./bar/foo.hsqlc -o -n
```

Will print the Input file location, 
and output file location. Should confirm where files will be written to.

#### Skip warnings

```sh
hsqlc -i ./bar/foo.hsqlc -o -w
```

The program will not print out any warnings, but will only print out errors in conversion.


## Module

```js
require('hsqlc');
```

The type definitions in `index.d.ts` should give a good idea of the functions available for use, and what types are present to use.



### toECL

```ts
function toECL(inputFilePath:ParsedPath, outputFilePath?:ParsedPath,importStack?:string[],options?:parseOptions):void;
```
This is the main driver of hsqlc. 

**Arguments**

`inputFilePath`,`outputFilePath` are type `path.ParsedPath` (where `path` is as imported from node's path module)

`importStack` is an array of strings listing the normalized path of all the modules that led to its import. It is optional and can be left empty if its not called by another instance of itself.

`options` is an object passed to `toECL`, that is passed to the internals of hsqlc. Currently, the layout is as follows
```ts
interface parseOptions{
    //write dependencies
    d:boolean;
    //skip warnings
    w:boolean;
}
```
If not passed, both keys are taken as false

**Return** : `void`

It doesn't return anything. If the results are required, please use functions [fileToECL](#filetoecl) or [stringToECL](#stringtoecl) as per requirements.

### stringToECL

### fileToECL

## Typescript

`hsqlc` does not use typescript. To allow extensibility, type definitions have been added for use.

Hence, `index.d.ts` is provided with all the required types and type definitions to use them effectively.

### index.d.ts

This exposes multiple interfaces, all required to interprete the results of the execution of the program.
The functions are as exposed by hsqlc for use.

