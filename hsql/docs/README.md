# Introduction

HSQL is intended to complement ECL. While ECL is great at developing ETL solutions, it is somewhat complex for being used as an analytics language. Borrowing from other analytics technologies like Big Query that use a subset of SQL or SQL like syntax, HSQL aims to provide a seamless interface for data science developers to use. SQL has survived and thrived for the last 43 years for various reasons. Almost every developer is exposed to SQL. Hence, HSQL aims to leverage this popularity to provide an interface to:

 1. Provide a powerful SQL query language to slice and dice data the resides in an HPCC Systems Data Lake. Filters, Aggregation, Grouping, Sorting, Joins, Field formatting functions
 2. Provide a way to visualize the data
 3. Provide a simple to use interface for performing Machine Learning
 
NOTE: The goal of HSQL is not to replace ECL, it is to provide a simple programming interface to perform data investigation and machine learning. 

## Table of Contents

- [Introduction](#introduction)
  - [Table of Contents](#table-of-contents)
  - [Quick Start](#quick-start)
    - [Setting up for development](#setting-up-for-development)
    - [Packaging](#packaging)
  - [Language syntax](#language-syntax)
  - [Usage](#usage)
    - [hsqlc as a command line tool](#hsqlc-as-a-command-line-tool)
    - [Output to stdout](#output-to-stdout)
    - [Output to file](#output-to-file)


## Quick Start

The setup process is as follows:

1. Grab the module.
2. Setup the repositry, with all the dependencies
```sh
npm i
```
3. Link the repo to your global folder (this allows running it as a single command)
```sh
npm link
```
Alternatively, it can be used through `npx` *without* linking: `npx hsqlc`

Also, steps 2,3 can be replaced by `npm i -g` (Add sudo if required)

4. Use it.
```sh
hsqlc -i input.hsql
```

**OR**

```sh
hsqlc -i input.hsqlc -o -d
```

The program will raise an error if the input file and output target share the same name.
Presenting the `-o -d` flags will **o**utput to `input.ecl` (derived from the file name) and also write the **d**ependencies.

A complete list of program arguments and explanations can be found under the documentation of [hsqlc](hsqlc/README.md)

### Setting up for development

After downloading the module and installing its dependencies, additionally:

1. Download devDependencies
   ```sh
   npm i --only=dev
   ```
2. Prepare HPCC Systems cluster for the testing process (This requires ECL client tools installed on the testing machine)
   1. Move the files under `docs/data` to the landing zone
   2. Despray as delimited to the scopes [defined as per description](hsqlc/dev/data-files/README.md)
   3. Install all ML_Core related bundles, commands as per official [HPCC documentation](https://hpccsystems.com/download/free-modules/machine-learning-library)
3. Testing
   ```sh
   npm t
   ```

### Packaging

This utility can also be packaged into an executable by using `pkg`.
The assets have been preconfigured, and executables may be easily generated by using

```sh
npm run build
```

This will yield three executables (as of now), and can be used the same as before

## Language syntax

If you know SQL, that's 50% of the work done!

The base idea of HSQL to have two kinds of statements, definitions, where SQL like syntax of `a = select * from xyz` is used, and action statements where eg. `output b` which is self explanatory and easy to use.

Detailed Syntax is is present at the [HSQL syntax pages](syntax.md).

For a good idea on how the result looks like, `readme.hsql` has been [translated for use](example-translation.md).

## Usage

Complete usage details for [hsqlc](hsqlc/README.md).

### hsqlc as a command line tool

Consider a test file `foo.hsql`

### Output to stdout

```sh
hsqlc -i foo.hsql
```

Convert the file to ECL, print to **STDOUT**.

### Output to file

```sh
hsqlc -i foo.hsql -o foo.ecl
```

```sh
hsqlc -i foo.hsql -o
```

Convert the file to ECL, write the output to `foo.ecl`

Note that if the output flag is present, but does not explicitly state the filename (as in example 2), hsqlc will attempt to extrapolate the output filename from the input filename.



